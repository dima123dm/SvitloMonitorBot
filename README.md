# üí° Svitlo Monitor Bot

![Python](https://img.shields.io/badge/Python-3.10%2B-blue?style=flat&logo=python&logoColor=white)
![Aiogram](https://img.shields.io/badge/Aiogram-3.x-blue?style=flat&logo=telegram&logoColor=white)

**Telegram Bot:** [@SvitloMonitorBot](https://t.me/SvitloMonitorBot)

**Svitlo Monitor Bot** ‚Äî —Ü–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–æ–≥–æ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≥—Ä–∞—Ñ—ñ–∫—ñ–≤ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –µ–ª–µ–∫—Ç—Ä–æ–µ–Ω–µ—Ä–≥—ñ—ó. –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ API —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ —Ç–∞ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

---

## üìã –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

* **–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ API:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ JSON-–¥–∞–Ω–∏—Ö –≤—ñ–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∫–æ–∂–Ω—ñ 5 —Ö–≤–∏–ª–∏–Ω.
* **–Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞:** –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –≥—Ä–∞—Ñ—ñ–∫—É ("—â–µ –Ω–µ –æ–ø—Ä–∏–ª—é–¥–Ω–µ–Ω–æ") —Ç–∞ –≤—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å ("—Å–≤—ñ—Ç–ª–æ —î").
* **–°–∏—Å—Ç–µ–º–∞ —Å–ø–æ–≤—ñ—â–µ–Ω—å (Alerts):**
    * `Pre-alert`: –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–∞ 5 —Ö–≤–∏–ª–∏–Ω –¥–æ –ø–æ—á–∞—Ç–∫—É –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è.
    * `Post-alert`: –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–ª–µ–∫—Ç—Ä–æ–ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è.
    * `Update-alert`: –ú–∏—Ç—Ç—î–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–º—ñ–Ω—É –≥—Ä–∞—Ñ—ñ–∫—É –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–º.
* **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞:**
    * –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Å—É–º–∞—Ä–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –≥–æ–¥–∏–Ω –±–µ–∑ —Å–≤—ñ—Ç–ª–∞ (–∑ —É—Ä–∞—Ö—É–≤–∞–Ω–Ω—è–º 30-—Ö–≤–∏–ª–∏–Ω–Ω–∏—Ö —Å–ª–æ—Ç—ñ–≤).
    * –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö SQLite.
    * –í–∏–≤—ñ–¥ –∑–≤—ñ—Ç—É –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ 7 –¥–Ω—ñ–≤.
* **–ú—É–ª—å—Ç–∏–∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π —Ä–µ–∂–∏–º:** –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å (—Ä–µ–≥—ñ–æ–Ω/—á–µ—Ä–≥–∞) –¥–ª—è –Ω–µ–æ–±–º–µ–∂–µ–Ω–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

---

## üìÇ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –û–ø–∏—Å –º–æ–¥—É–ª—ñ–≤

–ü—Ä–æ—î–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–æ –∑–∞ –º–æ–¥—É–ª—å–Ω–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–æ–º –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–æ—Å—Ç—ñ —Ç–∞ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –∫–æ–¥—É.

### 1. `main.py`
–¢–æ—á–∫–∞ –≤—Ö–æ–¥—É –≤ –ø—Ä–æ–≥—Ä–∞–º—É.
* **–§—É–Ω–∫—Ü—ñ—ó:** –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è `Bot` —Ç–∞ `Dispatcher`, –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ä–æ—É—Ç–µ—Ä—ñ–≤, –∑–∞–ø—É—Å–∫ `asyncio.create_task` –¥–ª—è —Ñ–æ–Ω–æ–≤–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤, —Å—Ç–∞—Ä—Ç –ø–æ–ª–ª—ñ–Ω–≥—É.

### 2. `config.py`
–§–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø—Ä–æ—î–∫—Ç—É.
* –ú—ñ—Å—Ç–∏—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏: `BOT_TOKEN`, `API_URL`, `DB_NAME`, `UPDATE_INTERVAL`.
* **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –≤–Ω–µ—Å—Ç–∏ –≤–ª–∞—Å–Ω—ñ –¥–∞–Ω—ñ —É —Ü–µ–π —Ñ–∞–π–ª.

### 3. `database.py` (Data Access Layer)
–í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤–∑–∞—î–º–æ–¥—ñ—é –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö SQLite —á–µ—Ä–µ–∑ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É `aiosqlite`.
* `init_db()`: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å `users` —Ç–∞ `daily_stats`.
* `save_user()` / `get_user()`: CRUD-–æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.
* `save_stats()`: –ó–∞–ø–∏—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å –∑–∞ –¥–∞—Ç—É.
* `get_stats_data()`: –ê–≥—Ä–µ–≥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∑–∞ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Ç–∏–∂–¥–µ–Ω—å –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏.

### 4. `api_utils.py` (Business Logic)
–£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö.
* `fetch_api_data()`: –í–∏–∫–æ–Ω–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ GET-–∑–∞–ø–∏—Ç—É.
* `parse_intervals()`: –ê–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–∞—Å–∏–≤—É —Å—Ç–∞—Ç—É—Å—ñ–≤ (0/1/2) —É —á–∞—Å–æ–≤—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏.
* `calculate_off_hours()`: –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å.
* `format_message()`: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.

### 5. `scheduler.py` (Background Tasks)
–ú–æ–¥—É–ª—å —Ñ–æ–Ω–æ–≤–∏—Ö –∑–∞–¥–∞—á.
* `check_updates()`: –ü–µ—Ä—ñ–æ–¥–∏—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ API, –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –∫–µ—à—É (`schedules_cache`) —Ç–∞ —Ä–æ–∑—Å–∏–ª–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –∑–º—ñ–Ω–∏.
* `check_alerts()`: –©–æ—Ö–≤–∏–ª–∏–Ω–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω—å (pre/post alerts).

### 6. `handlers.py` (User Interface)
–û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º.
* –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥–∏ `/start`.
* Callback-–æ–±—Ä–æ–±–Ω–∏–∫–∏ –¥–ª—è Inline-–∫–ª–∞–≤—ñ–∞—Ç—É—Ä (–≤–∏–±—ñ—Ä —Ä–µ–≥—ñ–æ–Ω—É —Ç–∞ —á–µ—Ä–≥–∏).
* –û–±—Ä–æ–±–Ω–∏–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –∫–Ω–æ–ø–æ–∫ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é (`–ì—Ä–∞—Ñ—ñ–∫`, `–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞`, `–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è`).

---

## üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫—É

–î–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –±–æ—Ç–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ñ–π –º–∞—à–∏–Ω—ñ –∞–±–æ —Å–µ—Ä–≤–µ—Ä—ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏:

### –ö—Ä–æ–∫ 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone [https://github.com/dima123dm/SvitloMonitorBot.git](https://github.com/dima123dm/SvitloMonitorBot.git)
cd SvitloMonitorBot

pip install -r requirements.txt
